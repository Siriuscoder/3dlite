version: '1.0.{build}'

image: 
  - Visual Studio 2022
  - Ubuntu2004

hosts:
  localhost: 127.0.0.1
  
configuration:
  - Debug

platform:
  - x64
  
init:
  - sh: cat /etc/apt/sources.list
  - sh: mkdir -p /home/appveyor/builds/lite3d_linux
  - cmd: mkdir C:\builds\lite3d_win
  
install:
  - sh: sudo apt-get update
  - sh: sudo apt-get install -y libdevil-dev libassimp-dev libsdl2-dev libfreetype6-dev libbullet-dev
  
before_build:
  - sh: cd /home/appveyor/builds/lite3d_linux
  - sh: cmake -DCMAKE_BUILD_TYPE=Debug -DENABLE_METRICS=ON /home/appveyor/projects/3dlite
  - cmd: cd C:\builds\lite3d_win
  - cmd: cmake -DCMAKE_BUILD_TYPE=Debug -DENABLE_METRICS=ON C:\projects\3dlite

build:
  project: C:\builds\lite3d_win\lite3d.sln
  
for:
-
  matrix:
    only:
      - image: Ubuntu2004

  build_script:
  - sh: make all
