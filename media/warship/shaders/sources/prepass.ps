#version 330

uniform sampler2D diffuse;
uniform sampler2D normals;

uniform mat3 normalMatrix;

in vec4 vv;
in vec3 vn;
in vec2 uv;

void main()
{
    // use normal from normal map instead vn
    vec4 nn = texture2D(normals, uv);

    gl_FragData[0] = vec4(vv / vv.w);
    gl_FragData[1] = vec4(normalMatrix * vec3(nn.xyz), nn.w);
    gl_FragData[2] = texture2D(diffuse, uv);
}